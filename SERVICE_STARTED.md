# 🎉 服务已启动成功！

## 访问信息

### Web 界面
```
http://localhost:7860
```

在浏览器中打开上面的地址即可使用！

## 功能说明

### 1. 四大名著知识问答
- 提问关于红楼梦、三国演义、西游记、水浒传的问题
- 基于本地知识库回答
- 支持对话记忆

### 2. 证件照生成
- 上传照片
- 指定尺寸（1寸、2寸等）
- 选择背景颜色（白色、蓝色、红色等）
- 图片会直接显示在对话中
- 可以下载生成的证件照

### 3. 对话历史
- 自动保存最近 5 轮对话
- 可以查看历史记录
- 可以清空记忆

## 测试证件照功能

1. 访问 http://localhost:7860

2. 在输入框中输入：
   ```
   请帮我生成一张2寸蓝底证件照，图片路径是 app/static/uploads/upload_1770105006.jpg
   ```

3. 查看结果：
   - ✅ 应该能看到证件照图片
   - ✅ 图片下方有下载按钮
   - ✅ 可以点击下载

## 技术信息

- **端口**: 7860
- **主机**: 0.0.0.0（允许外部访问）
- **模式**: 开发模式（自动重载）
- **LLM**: 阿里云 qwen-plus
- **Embedding**: 阿里云 text-embedding-v3

## 路由信息

- `/` - Web 界面
- `/chat` - 聊天 API
- `/photos/{filename}` - 证件照图片
- `/static/{path}` - 静态文件
- `/model-info` - 模型信息
- `/memory/history` - 对话历史
- `/memory/clear` - 清空记忆

## 服务管理

### 查看服务状态
服务正在后台运行（进程 ID: 191）

### 查看日志
服务日志会实时显示在终端中

### 停止服务
按 `Ctrl+C` 或关闭终端

### 重启服务
```bash
./start_web_service.sh
```

## 测试命令

### 测试主页
```bash
curl http://localhost:7860/
```

### 测试图片访问
```bash
curl -I http://localhost:7860/photos/id_photo_2寸_blue_20260203_162931.jpg
```

### 测试聊天 API
```bash
curl "http://localhost:7860/chat?query=红楼梦的作者是谁"
```

## 故障排除

### 问题 1: 无法访问
**检查**: 服务是否运行
```bash
lsof -i :7860
```

### 问题 2: 图片不显示
**检查**: 
1. 图片文件是否存在
   ```bash
   ls -la app/static/photos/
   ```
2. /photos 路由是否正常
   ```bash
   curl -I http://localhost:7860/photos/test.jpg
   ```

### 问题 3: 端口被占用
**解决**: 
```bash
# 查看占用端口的进程
lsof -i :7860

# 停止进程
kill -9 <PID>
```

## 下一步

1. 在浏览器中打开 http://localhost:7860
2. 尝试提问或生成证件照
3. 享受使用！

---

**提示**: 如果需要从其他设备访问，使用你的 IP 地址：
```
http://<你的IP>:7860
```
